{% extends 'base.html' %} 

{% block title %}{{ employee.first_name }}'s Dashboard{% endblock %} 

{% block content %}
<!-- You can remove the <!DOCTYPE>, <html>, <head>, and <body> tags -->
<!-- You can also remove the <nav> and <footer>, as they now come from base.html -->

<!-- Custom styles specific to THIS page can stay -->
<style>
  /* Custom styles for a better look */
  .profile-card {
    transition: box-shadow 0.3s ease-in-out;
  }
  .profile-card:hover {
    box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.1) !important;
  }
  .profile-photo-container {
    position: relative;
    width: 150px;
    height: 150px;
    margin: 0 auto;
  }
  .profile-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border: 4px solid #fff;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  .change-photo-btn {
    position: absolute;
    bottom: 5px;
    right: 5px;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  .profile-photo-container:hover .change-photo-btn {
    opacity: 1;
  }
</style>

<!-- Main Content -->
<!-- The container and row structure is good, keep it -->
<div class="row d-flex justify-content-center">
  <!-- Centered Employee Profile Card -->
  <div class="col-lg-7 col-md-9">
    <div class="card shadow-sm profile-card">
      <div
        class="card-header bg-primary text-white d-flex justify-content-between align-items-center"
      >
        <h5 class="mb-0">
          <i class="bi bi-person-badge me-2"></i>Profile Information
        </h5>
        <span class="badge bg-light text-primary"
          >Employee ID: {{ employee.id|stringformat:"05d" }}</span
        >
      </div>
      <div class="card-body text-center">
        <!-- Profile Photo Section -->
        <div class="profile-photo-container mb-3">
          {% if employee.photo %}
          <img
            src="{{ employee.photo.url }}"
            alt="Profile Photo of {{ employee.first_name }}"
            class="rounded-circle profile-photo"
          />
          {% else %}
          <!-- Placeholder image with a nice icon -->
          <div
            class="rounded-circle profile-photo bg-secondary-subtle d-flex align-items-center justify-content-center"
          >
            <i
              class="bi bi-person-fill text-secondary"
              style="font-size: 6rem"
            ></i>
          </div>
          {% endif %}
          <!-- Hidden button that appears on hover -->
          <a
            href="{% url 'portal:upload-photo' %}"
            class="btn btn-sm btn-light rounded-circle shadow-sm change-photo-btn"
            title="Change Photo"
            style="width: 40px; height: 40px"
          >
            <i class="bi bi-camera-fill"></i>
          </a>
        </div>

        <h3 class="card-title mb-1">
          {{ employee.first_name }} {{ employee.last_name }}
        </h3>
        <p class="card-text text-muted fs-5">
          {{ employee.position.title }}
        </p>
      </div>
      <!-- Details List with Icons -->
      <ul class="list-group list-group-flush fs-6">
        <li
          class="list-group-item d-flex justify-content-between align-items-center"
        >
          <div>
            <i class="bi bi-envelope-at text-muted me-3"></i>
            <strong>Email</strong>
          </div>
          <span class="text-end">{{ employee.email }}</span>
        </li>
        <li
          class="list-group-item d-flex justify-content-between align-items-center"
        >
          <div>
            <i class="bi bi-building text-muted me-3"></i>
            <strong>Department</strong>
          </div>
          <span class="text-end">{{ employee.department.name }}</span>
        </li>
        <li
          class="list-group-item d-flex justify-content-between align-items-center"
        >
          <div>
            <i class="bi bi-calendar-check text-muted me-3"></i>
            <strong>Date Joined</strong>
          </div>
          <span class="text-end"
            >{{ employee.hire_date|date:"F d, Y" }}</span
          >
        </li>
      </ul>
      <div class="card-footer text-center">
        <a href="{% url 'portal:upload-photo' %}" class="btn btn-primary">
          <i class="bi bi-pencil-square me-1"></i> Edit Profile Photo
        </a>
      </div>
    </div>
  </div>
</div>

{% endblock %}